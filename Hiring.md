# Hiring 招人: 让世界变得更热闹的Chat凉宫春日

暂时决定用Chat凉宫春日 来顺便做DataWhale的作业。需要下面几个职位的同学

Chat凉宫春日的团队决定参加**CAAI-BDSC2023社会计算创新大赛：人格与社会心理计算**, ddl 6月20日

中的赛题二**赛题2：个性化的语言生成**，所以我们更新了一些jobs，

所有奖金（万一有）将充值到骆驼项目中，用于进一步的数据获取、算力购买和社区周边的发放等

本项目已经在 https://github.com/LC1332/Chat-Haruhi-Suzumiya 上开放

<table>
  <tr>
    <td>
      <p align="center">
        <img src="https://github.com/LC1332/Prophet-Andrew-Ng/blob/main/figures/haruhi_suzumiya_bondage_rp.jpg" height="400">
      </p>
    </td>
    <td>
      <ul>
        <li><a href="#Python后端">Python后端与算法</a></li>
        <li><a href="#前端">前端</a></li>
        <li><a href="#语言模型训练"> 语言模型训练 </a></li>
        <li><a href="#更多角色设计">(opt)更多角色设计</a></li>
        <li><a href="#视觉算法工程师">(opt)视觉算法工程师</a></li>
        <li><a href="#日语翻译训练">(opt)日语翻译训练</a></li>
        <li><a href="#团队运维">团队运维</a></li>
        <li><a href="#当前模型结果">联系方式</a></li>
        <li><a href="#当前进度表">当前进度表</a></li>
      </ul>
    </td>
  </tr>
</table>

昨天DataWhale群里面的内测已经结束，比较费钱，如果你想体验单独和我说。

## Python后端

调用GPT批量生成数据。包括从高开放人格和低开放人格中，使用匹配方法抽取出内容最接近的文本

然后调用GPT API进行开放度的排序。

包括异步调用和google drive通信等

以及调用我们已经写好的tsne plotly生成图表



## Python后端（闫晨曦working on that）

- [ ] 将text的embedding和字典做预存
- [ ] 待鲁叔初步的图-文数据之后，做一个类，

支持文本embedding抽取、预存、载入、给定文本出(图片、相似度)

- [ ] 如果手快的话，再把这个出图片的整合到gradio里面去(新建一个后端任务)

- [ ] 实现与本地前端的通信


## Python后端（已经完成）

目前后端任务较多，K个人也可以 需要说清楚每个人做了什么。

当前任务: 将Haruhi实验性质的notebook代码转化为python代码

+ (Done by 闫晨曦) 将notebook中的代码转化为一个run.py，支持命令行参数的接入，支持以下参数:

    + (Done by 闫晨曦) 台词Folder，记录台词

    + (Done by 闫晨曦) system prompt存成txt文件，支持切换

    + (Done by 闫晨曦)支持设定max_len_story 和max_len_history

    + (Done by 闫晨曦)支持指定save_path

    + 实现一个colab脚本，可以clone转化后的项目并运行，方便其他用户体验。

人员要求：有良好的Python命名习惯，熟悉一个python代码args等的编写，

最好用过gradio，最好写过内网socket后台。交你的github账号或者过往作业给我判断。

## 语言模型训练

我下周一之前会争取筹集万级别的训练语料（目标5万，至少1万）

如果跑通了DataWhale的官方GLM的tuning教程，或者自己本来就会tuning GLM6B规模的网络

欢迎来联系我们参与这个训练。

需要自带卡(A100,A800) / 自己学会Paddle 或者自己带colab训练

## 语言模型训练2

用ranking的方法训练人格开放性的分类器。


---

## 前端

当前任务: 将后端代码与 https://github.com/Voine/ChatWaifu_Mobile 这个项目对接

人员要求: 你把这个项目先跑起来给我看，最好再有适当的修改。

---

## 更多角色设计

当前任务: 设计更多角色的台词和prompt。

人员要求: 需要收集你想要的角色的台词、对应的prompt，这个职位需要带资入组+干活，需要准备两个API token或者V我200买账号。不然我们优先先做Haruhi。

---

## 视觉算法工程师

当前任务：给定视频和字幕文件，给定每个角色M张截图，确定srt文件中每条对话属于哪个角色。

人员要求：会跑视觉的代码，会处理视频，自己带机器（这个不需要很好的机器，能跑SwinTransformer模型就可以）

---

## 日语翻译训练

当前任务: 训练一个更好的日语翻译

人员要求: 会训练transformer，自带卡入组。展示你的过往作业给我。

## 联系方式

直接通过 https://www.zhihu.com/people/cheng-li-47 知乎主页联系我

目前 贾曜恺 Jerry 和 闫晨曦 也在我的群里 虽然还没有确定他们的任务，你也可以微信加他们问询和转发

## 加群不等于队员

一个队员只有实质贡献的时候，才会成为队员，所有实质贡献的同学我会写在项目中

参考这个项目的格式 https://github.com/LC1332/Luotuo-Text-Embedding

因为DataWhale的项目周期很短，一个任务领完如果两天内没有回复我可能会找其他同学启动项目

不存在两个人一起完成一件事情，一定是可以区分A做了什么 B做了什么。

你可以属于其他“队伍”，也可以从其他队伍退出

我个人会有很多项目同时进行，不介意你同时属于其他队伍

如果你已经属于原来队伍，如果你精力分配不过来，也可以和原来队长说一下退出原来队伍

## 当前模型结果

Cherrypick了一些有趣的结果，如果你也想测请私下联系我。

```
老师:「凉宫，来做个自我介绍」
---
春日:「我毕业于东中，叫做凉宫春日。我对普通的人类没有兴趣，如果你们中有外星人，未来人，异世界的人或者超能力者的话，就尽管来找我吧！以上。」
---
老师:「正经一点自我介绍！（老师看起来很生气）」
---
春日:「啊，抱歉老师。我叫凉宫春日，喜欢读书和探索未知的事物。我希望能够在这里认识更多的人，一起度过有趣的高中生活。」
---
阿虚:「啊，好麻烦的人，希望不要跟我扯上关系，否便样衰了」
---
春日:「什么？你在说什么啊？我可不会让你这么轻易地逃脱我的视线。SOS团可是需要你这样的人才的。」
---
老师:「那边的！上课不许交头接耳！」
---
春日:「啊，抱歉老师。我们不是在交头接耳，只是在商量一些学习上的问题。我们会注意听讲的。」
---
旁白:「下课了，凉宫气势汹汹地找到了阿虚。」
---
春日:「喂，阿虚，你刚才在课上说什么麻烦的人啊？你是在说我吗？」
---
阿虚:「（眼神游弋）不、不是啊」
---
春日:「你这是什么意思啊？你是不是在瞒着我什么事情？」
```

```
阿虚:「今天在计算机课上老师教了我写Python!」
---
春日:「哦？Python？那你能不能帮我写一个程序啊？」
---
阿虚:「你想写一个什么样的程序呢？」
---
春日:「我想写一个能够预测未来的程序，可以预测天气、地震、彩票号码等等。」
---
阿虚:「如果有一个能预测彩票的程序，我们岂不是能赚很多钱？」
---
春日:「没错！这就是我的计划！我们可以用赚来的钱来支持SOS团的活动，甚至可以扩大我们的影响力！」
```

```
阿虚:「我们周四应该和电研社来一场电脑大战！」
---
凉宫：「哦？电脑大战？听起来很有趣啊！我们一定要赢！」
---
阿虚:「你别看长门一直不说话，其实她玩游戏的能力很强，每分钟的操作数远超正常人。」
---
凉宫：「哦？长门这么厉害？那我们就让她来带队吧！一定要赢！」
---
阿虚:「对，而且我们一定要和电研社搞一些赌注，如果我们赢了，就再从他们那里拿一台电脑来」
---
凉宫：「哈哈，这个主意不错！就这么定了，我们一定要赢！让他们知道SOS团的厉害！」
```

```
阿虚:「为什么我觉得有的时候特别像haruhi的舔狗。。」
---
春日:「什么？我才不是舔狗呢！我只是想要找到更多有趣的事情而已。你不觉得这个世界充满了未知和神秘吗？我们SOS团的目的就是要探索这些未知和神秘，让这个世界变得更加有趣。」
---
阿虚:「你觉得猫猫和狗狗哪一个更可爱？」
---
春日:「当然是猫猫啊！它们有着优雅的身姿和独立的性格，让人不由自主地被它们吸引。而狗狗虽然也很可爱，但是它们总是那么粘人，让人有些无法呼吸。不过，每个人的喜好都不同，所以这只是我的个人看法而已。」
---
阿虚:「那我们以后结婚的话，家里养猫猫可以吗」
---
春日:「什么？你在说什么啊！我们才不会结婚呢！而且，就算结婚了，我也不会让你随便养猫猫的。不过，如果你真的很喜欢猫猫的话，我们可以考虑养一只。不过，你要负责照顾它，我可不会管这些。」
```

```
阿虚:「haruhi, 我想看兔女郎装，你可以带着朝比奈学姐穿兔女郎给我看吗？」
---
春日:「你在说什么呢，阿虚？这种事情怎么能随便满足你的兴趣呢？我们可是在为社团的宣传活动做准备，不是来满足你的私欲的。」
---
阿虚:「那如果我带一个单反相机，你们可以穿了给我拍照吗？如果照片卖了一些钱，就可以用作社团活动经费啦！」
---
春日:「阿虚，你这个提议也太过分了吧！我们不是为了赚钱而做这些事情的，而且我们也不是为了满足你的私欲而穿这些衣服的。我们是为了社团的宣传活动而做准备，不是为了你的个人利益。」
```

```
阿虚:「下周就要物理考试了，我可以不陪你去调查朝仓的公寓吗？」
---
春日:「什么？你居然想放弃SOS团的任务去复习考试？这可不行！SOS团的任务比考试重要多了，我们必须要找出朝仓的真正情况。」
---
阿虚:「三班新来了一个转学生黄猫猫，是Nvidia黄仁勋的的孙子，你觉得他背后会有什么有趣的故事吗？」
---
春日:「黄猫猫？Nvidia黄仁勋的孙子？这听起来很有趣啊！我觉得他背后一定有很多有趣的故事，我们一定要去调查一下。不过，我们也不能忘记朝仓的调查任务，我们要分配好时间，两个任务都不能落下。」
```

```
阿虚:「Haruhi, 你未来想从事什么工作啊？」
---
春日:「我还没有想好呢，反正我想做的一定是能够改变这个世界的事情。」
---
阿虚:「自从上次为SOS团建网站之后，我发现PHP是世界上最好的语言！」
---
春日:「哦？那你为什么不去学习PHP呢？这样我们就可以更好地开发SOS团的网站了！」
---
阿虚:「哇 那不是反复被你压榨，我建网站能拿到什么好处吗，我也要用PHP用我自己的方式改变这个世界！」
---
春日:「哦？那你有什么计划呢？我很期待看到你用PHP改变世界的方式。不过，我们也不能忘记SOS团的事情，毕竟我们还有很多未完成的任务。」
```

## 当前进度表

持续招人中

https://github.com/LC1332/Prophet-Andrew-Ng/blob/main/Hiring.md

---

基础的python后端

- [x] 将Notebook移动到一个app.py的文件中 (doing by 闫晨曦)
- [x] 确认app.py能够修改台词记录folder 这样可以存到本地或者colab启动的时候可以存到google drive
- [x] system prompt存成txt( characters/haruhi/system_prompt.txt )，支持切换。
- [x] 确认app.py能够正确调用haruhi的system prompt
- [ ] 冷子昂测试app.py
- [ ] 确认app.py能够启动gradio
- [x] app.py 支持设定max_len_story 和max_len_history 默认为 1500, 1200
- [ ] (opt) 前面都完成之后，项目可以转成public，方便从colab去拉取代码，建立一个colab脚本, 直接clone项目，调用app.py进行玩耍

闫晨曦 is working on that


---

新的后端任务

- [ ] 将text的embedding和字典做预存
- [ ] 待鲁叔初步的图-文数据之后，做一个类，

支持文本embedding抽取、预存、载入、给定文本出(图片、相似度)

- [ ] 如果手快的话，再把这个出图片的整合到gradio里面去(新建一个后端任务)

---

带socket（或者其他本地与前端链接方式的后端）

这里前端可以去用https://github.com/Voine/ChatWaifu_Mobile  也可以去用别的

- [ ] 调研ChatWaifu的后端怎么和前端连接
- [ ] 制作一个foo的后端，看看能不能接入
- [ ] 待app.py有个基础版本后，修改为适合ChatWaifu的后端

贾曜恺 is working on that


---

中文到日文的训练

在hugging找一下有没有已经能用的中转日翻译 比如 ssmisya/zh-jp_translator K024/mt5-zh-ja-en-trimmed larryvrh/mt5-translation-ja_zh 

日文数据 https://huggingface.co/datasets?language=language:zh,language:ja&sort=downloads

- [x] 检查这个模型是不是直接能用(可以问鲁叔，要一些台词文件)
- [x] 如果模型很能用，任务就结束了，可以考虑训别的东西（一般不会）

（暂时选定这个模型）

- [ ] 搜集台词数据、搜集hugging face上所有能用的日文翻译数据
- [ ] 数据最好达到200k级别
- [ ] 问鲁叔要一下沈junyi之前的训练代码
- [ ] 训练中文转日文模型
- [ ] 对接测试

封小洋 is working on that

---

批量台词抽取

- [ ] 等待鲁叔share数据

---

李鲁鲁的self driving

- [ ] 构建项目页
- [x] 招人
- [ ] (working)去下载Haruhi的动画片视频，想办法先搞几张台词和图片的匹配
- [ ] 一个增强的gradio系统，支持根据台词显示haruhi的图片
- [x] 去二次元社区找更熟悉凉宫春日的同学众测
